.tournament_show
  .title
  = @tournament.title
  .game
  = @tournament.game
  .start_time
  = @tournament.starts_on

.sign_up
  Sign up for dis tournament!
  = form_for @tournament_membership do |f|
    = f.hidden_field :tournament_id, value: @tournament.id
    = f.submit('Sign up')

.owner
  %h3= I18n.t('tournaments.owner')
  %h4= link_to "#{@owner.username} - #{@owner.first_name} #{@owner.last_name}", user_path(@owner)

  - if @owner == current_user
    .owner-panel
      = button_to I18n.t('tournaments.manual_start'), tournament_path(@tournament, start: true), method: :put, class: 'manual-start-btn'
      .add-moderator
        %h4= I18n.t('tournaments.add_moderator')
        = form_for @moderator_role do |f|
          = f.hidden_field :tournament_id, value: @tournament.id
          = f.select :user_id, User.all.map {|u| [u.username, u.id]}
          = f.submit


.moderators
  %h3= I18n.t('tournaments.moderators')
  - @tournament.moderators.each do |mod|
    %h4= link_to "#{mod.username} - #{mod.first_name} #{mod.last_name}", user_path(mod)



.tournament_members
  - @tournament.users.each do |u|
    .username
    = u.username
    .email
    = u.email

.matches
  = @tournament.matches

.bracket_data
  - if @tournament.started?
    = @tournament.bracket.map {|round| round.map {|match| match.user_showings.sort_by {|us| us.top ? 0 : 1 }.map {|us| us.user.username } if match != nil }}.to_json

.update_path
  = request.env["REQUEST_URI"]

.bracket




